$('.kanban-container').append("<%= j render @column %>")

$('.kanban-title-board:last')[0].addEventListener('blur', function(event) {
  var columnTitle = event.srcElement.textContent.trim();
  updateColumn(columnTitle);
  this.closest('.kanban-board').remove();
});

function updateColumn (columnTitle) {
  // update column at the database
  $.ajax({
    url: <%= @column.board_id %> + '/columns/' + <%= @column.id %>,
    method: 'PATCH',
    headers: {
      'X-CSRF-Token': document.getElementsByName('csrf-token')[0].content
    },
    data: {
      'column[name]': columnTitle
    }
  });
};

$("#kanban-wrapper").find('.dropdown:last').click(function() {
  $(this).toggleClass('show');
});

$(".flashes").empty()
             .append("<%= j render 'shared/flash' %>")
             .children()
             .fadeOut( 3000, function() {});