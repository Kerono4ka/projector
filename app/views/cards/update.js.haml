- unless @card.errors.any?
  if ($("#kanban-wrapper").length){

  = render partial: 'click', formats: [:js]

  cardClass = `.kanban-item[data-card-id=#{@card.id}]`;
  
  $(cardClass).parent().html("#{j render @card}");

  $(cardClass).click(function() {
  $.ajax({
  url: `/boards/#{@card.column.board_id}/columns/#{@card.column_id}/cards/#{@card.id}/edit`,
  method: 'GET',
  headers: {
  'X-CSRF-Token': document.getElementsByName('csrf-token')[0].content
  },
  });
  });
  } else {
  var row = $("#cards_table #cards").find(".kanban-item[data-card-id=#{@card.id}]")
  row.find(".card-title").text("#{short_text(@card.title)}")
  row.find(".card-body").text("#{short_text(@card.body)}")
  $("body").find(".kanban-sidebar").removeClass('show');
  }

  $(cardClass).find('.members-request').on('click', onClick);

$(".flashes").empty()
\.append("#{j render 'shared/flash'}")
\.delay( 5000 )
\.slideUp( 1000 );
